{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/icon-error.png","../src/js/render-functions.js"],"sourcesContent":["const KEY = '43342378-f760c13e6ac2de41c368148af';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport function getImage(imgSearch) {\n  return fetch(\n    `${BASE_URL}?key=${KEY}&q=${imgSearch}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40`\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEZSURBVHgBrZVRDoMgDIar0fi6m2xH2Y3Ek2w3cFfZXXwBljFQCai0xemfoCaU/xNpKwAirXWrlDY5w8ViPhVmbgwIO14A3zeQKq/2IuwaqOu6A07+zaVUT8iUi+V28rd5NuSIOQs5wxyFUOZKqRtnmIpZQCZz3acWcgcXUjkF0b2bmwFSpAxskMAgYecaWSsFC8AgnHkMqIBR09TCGrnHsZic5iLs3By3ngWsITMgy9yphEyVJZjUM6esHUS9yfea7N7DAmJz/1niM2EhVBZR2UKl8DS/SFO80OhUnCBkoYWgz2MdNAx8q0jFOK/Fy1GQvdqYe50BQc3PgLDmRyCU+aYOfFsoCtPa+yXvp2/ue9rHqLATflCf5QflVUcNIrzeSwAAAABJRU5ErkJggg==\"","import { getImage } from './pixabay-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport errorPng from '../img/icon-error.png';\n//#region form elements\nconst loader = document.createElement('span');\nloader.classList.add('loader');\nconst container = document.createElement('div');\ncontainer.classList.add('container');\n\nconst form = document.createElement('form');\n\nconst input = document.createElement('input');\ninput.setAttribute('type', 'text');\ninput.setAttribute('name', 'query');\ninput.placeholder = 'Search images...';\n\nconst button = document.createElement('button');\nbutton.setAttribute('type', 'submit');\nbutton.textContent = 'Search';\n\nconst gallery = document.createElement('ul');\ngallery.classList.add('gallery');\n\nform.append(input, button);\ncontainer.append(form);\ndocument.body.append(container);\ndocument.body.append(gallery, loader);\n//#endregion\nform.addEventListener('submit', onSearch);\nfunction onSearch(e) {\n  e.preventDefault();\n  const query = e.currentTarget.elements.query.value;\n  if (query.trim() === '') {\n    iziToast.warning({\n      title: 'Caution',\n      message: 'Type what you want to find!',\n      backgroundColor: '#FFA000',\n      position: 'topRight',\n      theme: 'dark',\n      iconUrl: '',\n      timeout: 2000,\n    });\n    return;\n  }\n  gallery.innerHTML = '';\n  const loader = document.querySelector('.loader');\n  loader.classList.add('isVisible');\n  getImage(query)\n    .finally(() => {\n      loader.classList.remove('isVisible');\n    })\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.error({\n          theme: 'dark',\n          position: 'topRight',\n          message:\n            'Sorry, there are no images matching your search query. Please, try again!',\n          backgroundColor: ' #ef4040',\n          iconUrl: errorPng,\n          maxWidth: '432px',\n          timeout: 2000,\n        });\n        return;\n      }\n      console.log(data);\n      data.hits.forEach(image => {\n        //галерея\n        const galleryItem = document.createElement('li');\n        galleryItem.classList.add('gallery-item');\n\n        const link = document.createElement('a');\n        link.classList.add('gallery-link');\n        link.href = image.largeImageURL;\n\n        const img = document.createElement('img');\n        img.classList.add('gallery-image');\n        img.src = image.webformatURL;\n        img.dataset.source = image.largeImageURL;\n        img.alt = image.tags;\n        img.width = 360;\n        img.height = 200;\n\n        link.appendChild(img);\n\n        //desc\n        const descItems = {\n          Likes: image.likes,\n          Views: image.views,\n          Comments: image.comments,\n          Downloads: image.downloads,\n        };\n\n        const descList = document.createElement('ul');\n        descList.classList.add('gallery-desc-list');\n\n        for (let item in descItems) {\n          const descItem = document.createElement('li');\n          descItem.classList.add('gallery-desc-item');\n          const descTtl = document.createElement('p');\n          descTtl.classList.add('gallery-desc-ttl');\n          descTtl.textContent = item;\n          const descText = document.createElement('p');\n          descText.classList.add('gallery-desc-text');\n          descText.textContent = descItems[item];\n          descItem.append(descTtl, descText);\n          descList.append(descItem);\n        }\n\n        galleryItem.append(link, descList);\n\n        gallery.appendChild(galleryItem);\n      });\n\n      new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n\n      input.value = '';\n    })\n    .catch(err => {\n      iziToast.error({\n        theme: 'dark',\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please, try again!',\n        backgroundColor: ' #ef4040',\n        iconUrl: errorPng,\n        maxWidth: '432px',\n        timeout: 2000,\n      });\n      console.log(err);\n      form.reset();\n      return err;\n    });\n}\n"],"names":["KEY","BASE_URL","getImage","imgSearch","response","errorPng","loader","container","form","input","button","gallery","onSearch","e","query","iziToast","data","image","galleryItem","link","img","descItems","descList","item","descItem","descTtl","descText","SimpleLightbox","err"],"mappings":"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"}