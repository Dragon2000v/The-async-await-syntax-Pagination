{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/icon-error.png","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst KEY = '43342378-f760c13e6ac2de41c368148af';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImage(imgSearch, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: KEY,\n        q: imgSearch,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n   // console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderLoader() {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  document.body.append(loader);\n}\n\nexport function renderGallery(imagesData) {\n  const gallery = document.querySelector('.gallery');\n\n\n  if (!gallery) {\n    console.error('Error: Gallery container not found');\n    return;\n  }\n\n  imagesData.forEach(image => {\n    const galleryItem = document.createElement('li');\n    galleryItem.classList.add('gallery-item');\n\n    const link = document.createElement('a');\n    link.classList.add('gallery-link');\n    link.href = image.largeImageURL;\n\n    const img = document.createElement('img');\n    img.classList.add('gallery-image');\n    img.src = image.webformatURL;\n    img.dataset.source = image.largeImageURL;\n    img.alt = image.tags;\n    img.width = '360px';\n    img.height = 'auto';\n\n    link.appendChild(img);\n\n    const descItems = {\n      Likes: image.likes,\n      Views: image.views,\n      Comments: image.comments,\n      Downloads: image.downloads,\n    };\n\n    const descList = document.createElement('ul');\n    descList.classList.add('gallery-desc-list');\n\n    for (let item in descItems) {\n      const descItem = document.createElement('li');\n      descItem.classList.add('gallery-desc-item');\n      const descTtl = document.createElement('p');\n      descTtl.classList.add('gallery-desc-ttl');\n      descTtl.textContent = item;\n      const descText = document.createElement('p');\n      descText.classList.add('gallery-desc-text');\n      descText.textContent = descItems[item];\n      descItem.append(descTtl, descText);\n      descList.append(descItem);\n    }\n\n    galleryItem.append(link, descList);\n    gallery.appendChild(galleryItem);\n  });\n\n  if (imagesData.length === 0) {\n    iziToast.error({\n      theme: 'dark',\n      position: 'topRight',\n      message:\n        'An error occurred while fetching images. Please try again later.',\n      backgroundColor: '#ef4040',\n      iconUrl: errorPng,\n      maxWidth: '432px',\n      timeout: 2000,\n    });\n    toggleLoadMoreButton(false, 'No images found.'); // Скрыть кнопку \"Загрузить еще\"\n  }\n\n  if (imagesData.length > 0) {\n    new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n}\n\nexport function toggleLoadMoreButton(show,  message = '') {\n  const loadMoreBtn = document.querySelector('.load-button');\n  if (show) {\n    loadMoreBtn.classList.remove('is-hidden');\n  } else {\n    loadMoreBtn.classList.add('is-hidden');\n    if (message) {\n      iziToast.warning({\n        title: 'Caution',\n        message: message,\n        backgroundColor: '#FFA000',\n        position: 'topRight',\n        theme: 'dark',\n        iconUrl: '',\n        timeout: 2000,\n      });\n    }\n    \n  }\n}\n ","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEZSURBVHgBrZVRDoMgDIar0fi6m2xH2Y3Ek2w3cFfZXXwBljFQCai0xemfoCaU/xNpKwAirXWrlDY5w8ViPhVmbgwIO14A3zeQKq/2IuwaqOu6A07+zaVUT8iUi+V28rd5NuSIOQs5wxyFUOZKqRtnmIpZQCZz3acWcgcXUjkF0b2bmwFSpAxskMAgYecaWSsFC8AgnHkMqIBR09TCGrnHsZic5iLs3By3ngWsITMgy9yphEyVJZjUM6esHUS9yfea7N7DAmJz/1niM2EhVBZR2UKl8DS/SFO80OhUnCBkoYWgz2MdNAx8q0jFOK/Fy1GQvdqYe50BQc3PgLDmRyCU+aYOfFsoCtPa+yXvp2/ue9rHqLATflCf5QflVUcNIrzeSwAAAABJRU5ErkJggg==\"","import './js/pixabay-api';\nimport './js/render-functions';\nimport './css/styles.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport errorPng from '../src/img/icon-error.png';\nimport {\n  renderGallery,\n  renderLoader,\n  toggleLoadMoreButton,\n} from './js/render-functions';\nimport { getImage } from './js/pixabay-api';\n\n//#region form elements\nconst loader = document.createElement('span');\nloader.classList.add('loader');\nconst container = document.createElement('div');\ncontainer.classList.add('container');\n\nconst form = document.createElement('form');\n\nconst input = document.createElement('input');\ninput.setAttribute('type', 'text');\ninput.setAttribute('name', 'query');\ninput.placeholder = 'Search images...';\n\nconst button = document.createElement('button');\nbutton.setAttribute('type', 'submit');\nbutton.textContent = 'Search';\n\nconst gallery = document.createElement('ul');\ngallery.classList.add('gallery');\n\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.setAttribute('type', 'button');\nloadMoreBtn.classList.add('search-button');\nloadMoreBtn.classList.add('load-button');\nloadMoreBtn.classList.add('is-hidden');\nloadMoreBtn.textContent = 'Load more';\n\nform.append(input, button);\ncontainer.append(form);\ndocument.body.append(container);\ndocument.body.append(gallery, loader, loadMoreBtn);\n//#endregion\n\nform.addEventListener('submit', onSearch);\n\nlet page = 1;\nlet query = '';\nlet per_page = 15;\n\nasync function onSearch(e) {\n  e.preventDefault();\n  query = e.currentTarget.elements.query.value.trim();\n  if (query.trim() === '') {\n    iziToast.warning({\n      title: 'Caution',\n      message: 'Type what you want to find!',\n      backgroundColor: '#FFA000',\n      position: 'topRight',\n      theme: 'dark',\n      iconUrl: '',\n      timeout: 2000,\n    });\n    return;\n  }\n  // Reset page to 1 for new searches\n  page = 1;\n  // Clear previous gallery content\n  gallery.innerHTML = '';\n  // Show loader\n  loader.classList.add('isVisible');\n  try {\n    const imageData = await getImage(query, page);\n    if (imageData.hits.length === 0) {\n      iziToast.error({\n        theme: 'dark',\n        position: 'topRight',\n        message:\n          'image not found!',\n        backgroundColor: '#ef4040',\n        iconUrl: errorPng,\n        maxWidth: '432px',\n        timeout: 2000,\n      });\n      toggleLoadMoreButton(false);\n      input.value = '';\n      return;\n    }\n    renderGallery(imageData.hits);\n    toggleLoadMoreButton(imageData.totalHits);\n  } catch (error) {\n    //console.error('Error fetching images:', error);\n    iziToast.error({\n      theme: 'dark',\n      position: 'topRight',\n      message:\n        `An error occurred while fetching images. ${error}`,\n      backgroundColor: '#ef4040',\n      iconUrl: errorPng,\n      maxWidth: '432px',\n      timeout: 2000,\n    });\n  } finally {\n    // Hide loader\n    loader.classList.remove('isVisible');\n  }\n}\n\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onLoadMore() {\n  page++;\n  loader.classList.add('isVisible');\n  try {\n    const imageData = await getImage(query, page);\n    renderGallery(imageData.hits);\n    // Если количество загруженных изображений равно или больше общего количества изображений\n    if (gallery.querySelectorAll('.gallery-item').length >= imageData.totalHits) { \n      toggleLoadMoreButton(false); \n      iziToast.warning({\n        title: 'Caution',\n        message: 'No more images found.',\n        backgroundColor: '#FFA000',\n        position: 'topRight',\n        theme: 'dark',\n        iconUrl: '',\n        timeout: 2000,\n      });\n    }\n    toggleLoadMoreButton(imageData.totalHits > page * per_page);\n    // Smooth scroll to bottom\n    window.scrollBy({\n      top: window.innerHeight,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    //console.error('Error fetching more images:', error);\n    iziToast.warning({\n      title: 'Caution',\n      message: 'No more images found.',\n      backgroundColor: '#FFA000',\n      position: 'topRight',\n      theme: 'dark',\n      iconUrl: '',\n      timeout: 2000,\n    });\n    toggleLoadMoreButton(false);\n  } finally {\n    loader.classList.remove('isVisible');\n  }\n}\n"],"names":["KEY","BASE_URL","getImage","imgSearch","page","axios","error","renderGallery","imagesData","gallery","image","galleryItem","link","img","descItems","descList","item","descItem","descTtl","descText","iziToast","toggleLoadMoreButton","SimpleLightbox","show","message","loadMoreBtn","errorPng$1","loader","container","form","input","button","onSearch","query","per_page","e","imageData","errorPng","onLoadMore"],"mappings":"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"}